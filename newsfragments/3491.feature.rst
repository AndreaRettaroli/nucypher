The code is now agnostic towards the type of RPC endpoint used.
